<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Debug Reuniones - APAFA</title>
    <link rel="stylesheet" href="assets/lib/bootstrap/dist/css/bootstrap.min.css" />
</head>
<body>
    <div class="container mt-5">
        <h1>üêõ DEBUG - Reuniones APAFA</h1>
        <div id="debug-output" class="mt-4"></div>

        <div id="main-content" class="mt-4">
            <div class="card">
                <div class="card-body">
                    <h5>Contenido de la p√°gina</h5>
                    <div id="reuniones-info">Cargando...</div>
                </div>
            </div>
        </div>

        <div class="mt-4">
            <a href="reuniones.html" class="btn btn-primary">‚Üê Volver a Reuniones</a>
            <a href="diagnostico.html" class="btn btn-info">üîç Ir a diagn√≥stico general</a>
        </div>
    </div>

    <script>
        const debugOutput = document.getElementById('debug-output');

        function debug(msg, type = 'info') {
            const div = document.createElement('div');
            div.className = `alert alert-${type === 'error' ? 'danger' : type === 'success' : 'info'}`;
            div.innerHTML = `<small><strong>${new Date().toLocaleTimeString()}:</strong> ${msg}</small>`;
            debugOutput.appendChild(div);
            console.log(`${type}: ${msg}`);
        }

        // Test b√°sico de datos de reuniones
        debug('Iniciando debug de datos de reuniones...');

        // Verificar que podemos cargar datos de reuniones (por ahora mock)
        debug('Cargando datos mock de reuniones...');

        // Simular datos de reuniones (ya que actualmente es mock)
        const reunionesMock = [
            {
                id: 1,
                titulo: "Reuni√≥n General de Padres de Familia",
                fecha: "2026-01-15",
                hora: "19:00",
                motivo: "Reuni√≥n general programada",
                asistentes: 25,
                total_padres: 6
            }
        ];

        setTimeout(() => {
            debug(`Datos de reuniones simulados: ${reunionesMock.length} reuniones`, 'success');

            const infoDiv = document.getElementById('reuniones-info');
            infoDiv.innerHTML = `
                <p><strong>Total de reuniones:</strong> ${reunionesMock.length}</p>
                <p><strong>Pr√≥xima reuni√≥n:</strong> ${reunionesMock[0]?.titulo || 'N/A'}</p>
                <p><strong>Fecha:</strong> ${reunionesMock[0]?.fecha || 'N/A'}</p>
                <p><strong>Asistentes:</strong> ${reunionesMock[0]?.asistentes || 0}</p>
            `;

            debug('Info de reuniones mostrada correctamente', 'success');
        }, 500);

        // Verificar que ApafaData funciona
        setTimeout(() => {
            debug('Verificando ApafaData para reuniones...');
            if (typeof ApafaData !== 'undefined') {
                debug('‚úÖ ApafaData disponible', 'success');

                // Intentar cargar datos (deber√≠a usar datos mock)
                ApafaData.loadData('reuniones')
                    .then(reuniones => {
                        debug(`ApafaData.loadData funcion√≥: ${reuniones.length} reuniones`, 'success');
                    })
                    .catch(error => {
                        debug(`ApafaData.loadData fall√≥: ${error.message}`, 'error');
                    });
            } else {
                debug('‚ùå ApafaData no disponible', 'error');
            }
        }, 1000);

        debug('Debug de reuniones configurado');
    </script>

    <!-- Data loader -->
    <script src="assets/js/data-loader.js"></script>
</body>
</html>